<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Study With Prof Dudu - Quiz Portal</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
</head>

<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark glass-nav fixed-top">
        <div class="container">
            <a class="navbar-brand" href="#">
                <div class="brand-logo">
                    <i class="fas fa-graduation-cap"></i>
                </div>
                <span class="brand-text">Prof Dudu</span>
            </a>
            <div class="navbar-nav ms-auto d-flex flex-row align-items-center gap-2">
                <span id="userDisplay" class="nav-link text-white d-none user-badge">
                    <i class="fas fa-user-circle me-1"></i>
                    <span id="userName"></span>
                </span>
                <button id="logoutBtn" class="btn btn-glass btn-sm d-none" onclick="logout()">
                    <i class="fas fa-sign-out-alt me-1"></i>Logout
                </button>
            </div>
        </div>
    </nav>

    <!-- Hero Background -->
    <div class="hero-bg"></div>
    <div class="floating-shapes">
        <div class="shape shape-1"></div>
        <div class="shape shape-2"></div>
        <div class="shape shape-3"></div>
        <div class="shape shape-4"></div>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <div class="container">

            <!-- Device Locked Screen -->
            <div id="deviceLockedSection" class="d-none fade-in">
                <div class="row justify-content-center align-items-center min-vh-100">
                    <div class="col-11 col-sm-8 col-md-6 col-lg-5 col-xl-4">
                        <div class="text-center mb-4 text-white">
                            <div class="logo-circle mx-auto mb-3" style="background:rgba(255,255,255,0.15)">
                                <i class="fas fa-lock fa-3x"></i>
                            </div>
                            <h1 class="display-6 fw-bold">Access Denied</h1>
                            <p class="opacity-75">Study With Prof Dudu Quiz Portal</p>
                        </div>
                        <div class="auth-card text-center">
                            <div class="mb-3">
                                <span style="font-size:3rem;">&#128274;</span>
                            </div>
                            <h4 class="fw-bold text-danger mb-3">Device Already Used</h4>
                            <p class="text-muted mb-0">
                                This device has already been used to sit this examination.
                            </p>
                            <p class="text-muted mt-2">
                                Each device may only take the exam <strong>once</strong>.
                                If you believe this is an error, please contact your supervisor.
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Auth Section -->
            <div id="authSection" class="fade-in">
                <div class="row justify-content-center align-items-center min-vh-100">
                    <div class="col-11 col-sm-8 col-md-6 col-lg-5 col-xl-4">
                        <!-- Welcome Header -->
                        <div class="text-center mb-4 text-white">
                            <div class="logo-circle mx-auto mb-3">
                                <i class="fas fa-graduation-cap fa-3x"></i>
                            </div>
                            <h1 class="display-6 fw-bold">Welcome!</h1>
                            <p class="opacity-75">Study With Prof Dudu Quiz Portal</p>
                        </div>

                        <div class="auth-card">
                            <!-- Login Form -->
                            <div id="loginForm">
                                <h4 class="text-center mb-4 fw-semibold">
                                    <i class="fas fa-sign-in-alt me-2 text-primary"></i>Quiz Portal
                                </h4>
                                <div class="form-floating mb-3">
                                    <input type="email" id="loginEmail" class="form-control"
                                        placeholder="name@example.com">
                                    <label><i class="fas fa-envelope me-2"></i>Email Address</label>
                                </div>
                                <div class="form-floating mb-4">
                                    <input type="password" id="loginPassword" class="form-control"
                                        placeholder="Password">
                                    <label><i class="fas fa-lock me-2"></i>Password</label>
                                </div>
                                <button class="btn btn-primary btn-lg w-100 mb-3 btn-glow" onclick="login()">
                                    <i class="fas fa-arrow-right me-2"></i>Login
                                </button>
                                <div class="text-center">
                                    <span class="text-muted">New student?</span>
                                    <a href="#" class="fw-semibold text-decoration-none ms-1"
                                        onclick="showRegister()">Create Account</a>
                                </div>
                            </div>

                            <!-- Register Form -->
                            <div id="registerForm" class="d-none">
                                <h4 class="text-center mb-4 fw-semibold">
                                    <i class="fas fa-user-plus me-2 text-success"></i>Create Account
                                </h4>
                                <div class="form-floating mb-3">
                                    <input type="text" id="regName" class="form-control" placeholder="Full Name">
                                    <label><i class="fas fa-user me-2"></i>Full Name</label>
                                </div>
                                <div class="form-floating mb-3">
                                    <input type="email" id="regEmail" class="form-control"
                                        placeholder="name@example.com">
                                    <label><i class="fas fa-envelope me-2"></i>Email Address</label>
                                </div>
                                <div class="form-floating mb-3">
                                    <input type="password" id="regPassword" class="form-control" placeholder="Password">
                                    <label><i class="fas fa-lock me-2"></i>Password</label>
                                </div>
                                <div class="form-floating mb-4">
                                    <input type="password" id="regConfirmPassword" class="form-control"
                                        placeholder="Confirm Password">
                                    <label><i class="fas fa-check-circle me-2"></i>Confirm Password</label>
                                </div>
                                <button class="btn btn-success btn-lg w-100 mb-3 btn-glow" onclick="register()">
                                    <i class="fas fa-user-plus me-2"></i>Register
                                </button>
                                <div class="text-center">
                                    <span class="text-muted">Already registered?</span>
                                    <a href="#" class="fw-semibold text-decoration-none ms-1"
                                        onclick="showLogin()">Login here</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Category Selection Section -->
            <div id="categorySection" class="d-none fade-in">
                <div class="category-page py-5">
                    <div class="text-center mb-5">
                        <h1 class="display-5 fw-bold text-white mb-3">
                            <i class="fas fa-book-reader me-3"></i>Choose Your Path
                        </h1>
                        <p class="lead text-white opacity-75">Select your quiz category. Remember, you can only attempt
                            once!</p>

                        <div class="d-flex justify-content-center gap-3 flex-wrap mt-4">
                            <div class="info-badge">
                                <i class="fas fa-clock me-2"></i>45 Minutes
                            </div>
                            <div class="info-badge warning">
                                <i class="fas fa-exclamation-triangle me-2"></i>One Attempt Only
                            </div>
                        </div>
                    </div>

                    <div class="row justify-content-center g-4">
                        <!-- Science Card -->
                        <div class="col-12 col-md-6 col-lg-4">
                            <div id="scienceCard" class="category-card science-card">
                                <div class="card-shine"></div>
                                <div class="category-content">
                                    <div class="category-icon-wrapper science-icon-bg">
                                        <i class="fas fa-atom fa-3x"></i>
                                    </div>
                                    <h2 class="mt-4 mb-3 fw-bold">Science</h2>
                                    <p class="text-muted mb-4">Challenge yourself with scientific knowledge</p>

                                    <div class="subjects-grid mb-4">
                                        <span class="subject-tag science-tag"><i
                                                class="fas fa-calculator me-1"></i>Maths</span>
                                        <span class="subject-tag science-tag"><i
                                                class="fas fa-language me-1"></i>English</span>
                                        <span class="subject-tag science-tag"><i
                                                class="fas fa-bolt me-1"></i>Physics</span>
                                        <span class="subject-tag science-tag"><i
                                                class="fas fa-dna me-1"></i>Biology</span>
                                        <span class="subject-tag science-tag"><i
                                                class="fas fa-flask me-1"></i>Chemistry</span>
                                    </div>

                                    <div class="question-count mb-4">
                                        <span class="count-number">100</span>
                                        <span class="count-text">Questions</span>
                                    </div>

                                    <button class="btn btn-science btn-lg w-100" onclick="confirmStartQuiz('science')">
                                        <i class="fas fa-rocket me-2"></i>Start Science Quiz
                                    </button>
                                </div>
                                <div class="locked-overlay">
                                    <i class="fas fa-lock fa-3x mb-3"></i>
                                    <h4>LOCKED</h4>
                                </div>
                            </div>
                        </div>

                        <!-- Arts Card -->
                        <div class="col-12 col-md-6 col-lg-4">
                            <div id="artsCard" class="category-card arts-card">
                                <div class="card-shine"></div>
                                <div class="category-content">
                                    <div class="category-icon-wrapper arts-icon-bg">
                                        <i class="fas fa-palette fa-3x"></i>
                                    </div>
                                    <h2 class="mt-4 mb-3 fw-bold">Arts</h2>
                                    <p class="text-muted mb-4">Explore your artistic and literary knowledge</p>

                                    <div class="subjects-grid mb-4">
                                        <span class="subject-tag arts-tag"><i
                                                class="fas fa-language me-1"></i>English</span>
                                        <span class="subject-tag arts-tag"><i
                                                class="fas fa-book me-1"></i>Literature</span>
                                        <span class="subject-tag arts-tag"><i
                                                class="fas fa-landmark me-1"></i>Government</span>
                                        <span class="subject-tag arts-tag"><i class="fas fa-cross me-1"></i>CRS</span>
                                    </div>

                                    <div class="question-count mb-4">
                                        <span class="count-number">100</span>
                                        <span class="count-text">Questions</span>
                                    </div>

                                    <button class="btn btn-arts btn-lg w-100" onclick="confirmStartQuiz('arts')">
                                        <i class="fas fa-rocket me-2"></i>Start Arts Quiz
                                    </button>
                                </div>
                                <div class="locked-overlay">
                                    <i class="fas fa-lock fa-3x mb-3"></i>
                                    <h4>LOCKED</h4>
                                </div>
                            </div>
                        </div>

                        <!-- Commercial Card -->
                        <div class="col-12 col-md-6 col-lg-4">
                            <div id="commercialCard" class="category-card commercial-card">
                                <div class="card-shine"></div>
                                <div class="category-content">
                                    <div class="category-icon-wrapper commercial-icon-bg">
                                        <i class="fas fa-chart-line fa-3x"></i>
                                    </div>
                                    <h2 class="mt-4 mb-3 fw-bold">Commercial</h2>
                                    <p class="text-muted mb-4">Master business, finance and commerce</p>

                                    <div class="subjects-grid mb-4">
                                        <span class="subject-tag commercial-tag"><i
                                                class="fas fa-calculator me-1"></i>Maths</span>
                                        <span class="subject-tag commercial-tag"><i
                                                class="fas fa-language me-1"></i>English</span>
                                        <span class="subject-tag commercial-tag"><i
                                                class="fas fa-coins me-1"></i>Economics</span>
                                        <span class="subject-tag commercial-tag"><i
                                                class="fas fa-store me-1"></i>Commerce</span>
                                        <span class="subject-tag commercial-tag"><i
                                                class="fas fa-file-invoice-dollar me-1"></i>Accounting</span>
                                    </div>

                                    <div class="question-count mb-4">
                                        <span class="count-number">100</span>
                                        <span class="count-text">Questions</span>
                                    </div>

                                    <button class="btn btn-commercial btn-lg w-100"
                                        onclick="confirmStartQuiz('commercial')">
                                        <i class="fas fa-rocket me-2"></i>Start Commercial Quiz
                                    </button>
                                </div>
                                <div class="locked-overlay">
                                    <i class="fas fa-lock fa-3x mb-3"></i>
                                    <h4>LOCKED</h4>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Already Attempted Message -->
                    <div id="alreadyAttempted" class="d-none mt-5">
                        <div class="completed-banner">
                            <i class="fas fa-check-circle fa-3x mb-3"></i>
                            <h4>Quiz Already Completed!</h4>
                            <p id="attemptedMessage" class="mb-0"></p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Quiz Section -->
            <div id="quizSection" class="d-none fade-in">
                <!-- Quiz Header -->
                <div class="quiz-header-bar">
                    <div class="row align-items-center">
                        <div class="col-4 col-md-4">
                            <div class="subject-indicator">
                                <i class="fas fa-book-open me-2 d-none d-sm-inline"></i>
                                <span id="currentSubject"></span>
                            </div>
                        </div>
                        <div class="col-4 col-md-4 text-center">
                            <div class="timer-box" id="timerBox">
                                <i class="fas fa-clock me-1"></i>
                                <span id="timerDisplay">30:00</span>
                            </div>
                        </div>
                        <div class="col-4 col-md-4 text-end">
                            <div class="progress-indicator">
                                <span id="questionProgress">1/50</span>
                            </div>
                        </div>
                    </div>
                    <div class="progress quiz-progress mt-3">
                        <div id="progressBar" class="progress-bar" style="width: 0%"></div>
                    </div>
                </div>

                <!-- Question Container -->
                <div class="quiz-container py-4">
                    <div class="question-card">
                        <div class="question-header">
                            <span class="question-badge" id="questionNumber">Question 1</span>
                        </div>
                        <div class="question-body">
                            <p id="questionText" class="question-text"></p>
                            <div id="optionsContainer" class="options-grid"></div>
                        </div>
                    </div>

                    <!-- Navigation Buttons -->
                    <div class="quiz-nav mt-4">
                        <button id="prevBtn" class="btn btn-nav btn-prev" onclick="previousQuestion()">
                            <i class="fas fa-chevron-left me-1 me-sm-2"></i><span
                                class="d-none d-sm-inline">Previous</span>
                        </button>
                        <button id="submitQuizBtn" class="btn btn-submit-main" onclick="submitQuiz()">
                            <i class="fas fa-paper-plane me-1 me-sm-2"></i><span class="btn-text">Submit</span>
                        </button>
                        <button id="nextBtn" class="btn btn-nav btn-next" onclick="nextQuestion()">
                            <span class="d-none d-sm-inline">Next</span><i
                                class="fas fa-chevron-right ms-1 ms-sm-2"></i>
                        </button>
                    </div>

                    <!-- Question Navigator -->
                    <div class="navigator-card mt-4">
                        <div class="navigator-header" data-bs-toggle="collapse" data-bs-target="#navCollapse">
                            <i class="fas fa-th-large me-2"></i>Question Navigator
                            <i class="fas fa-chevron-down ms-auto"></i>
                        </div>
                        <div class="collapse show" id="navCollapse">
                            <div class="navigator-body">
                                <div id="questionNavigator" class="question-nav-grid"></div>
                                <div class="navigator-legend mt-3">
                                    <span class="legend-item"><span class="legend-dot answered"></span>Answered</span>
                                    <span class="legend-item"><span
                                            class="legend-dot unanswered"></span>Unanswered</span>
                                    <span class="legend-item"><span class="legend-dot current"></span>Current</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Results Section -->
            <div id="resultsSection" class="d-none fade-in">
                <div class="py-5">
                    <div class="results-card">
                        <div class="results-header">
                            <div class="trophy-circle" id="trophyCircle">
                                <i id="resultIcon" class="fas fa-trophy"></i>
                            </div>
                            <h1 class="mt-4 mb-2 fw-bold">Quiz Completed!</h1>
                            <p id="resultMessage" class="lead text-muted"></p>
                        </div>

                        <div class="score-display">
                            <div class="score-circle">
                                <svg class="score-ring" viewBox="0 0 120 120">
                                    <circle class="score-ring-bg" cx="60" cy="60" r="54" />
                                    <circle class="score-ring-fill" id="scoreRing" cx="60" cy="60" r="54" />
                                </svg>
                                <div class="score-content">
                                    <span class="score-value" id="percentage">0%</span>
                                    <span class="score-label">Score</span>
                                </div>
                            </div>
                        </div>

                        <div class="stats-grid">
                            <div class="stat-box">
                                <div class="stat-icon success">
                                    <i class="fas fa-check"></i>
                                </div>
                                <span class="stat-value" id="totalScore">0</span>
                                <span class="stat-label">Correct</span>
                            </div>
                            <div class="stat-box">
                                <div class="stat-icon primary">
                                    <i class="fas fa-list"></i>
                                </div>
                                <span class="stat-value" id="totalQuestions">0</span>
                                <span class="stat-label">Total</span>
                            </div>
                            <div class="stat-box">
                                <div class="stat-icon warning">
                                    <i class="fas fa-clock"></i>
                                </div>
                                <span class="stat-value" id="timeSpent">0</span>
                                <span class="stat-label">Minutes</span>
                            </div>
                        </div>

                        <div class="breakdown-section">
                            <h5 class="mb-4"><i class="fas fa-chart-bar me-2"></i>Subject Breakdown</h5>
                            <div id="subjectBreakdown" class="breakdown-grid"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container text-center">
            <p class="mb-0">
                <i class="fas fa-graduation-cap me-2"></i>
                &copy; 2025 Study With Prof Dudu. All Rights Reserved.
            </p>
        </div>
    </footer>

    <!-- Toast Notification -->
    <div class="toast-container position-fixed top-0 end-0 p-3" style="z-index: 9999;">
        <div id="toast" class="toast custom-toast" role="alert">
            <div class="toast-header">
                <i class="fas fa-bell me-2 text-primary"></i>
                <strong class="me-auto" id="toastTitle">Notification</strong>
                <button type="button" class="btn-close" data-bs-dismiss="toast"></button>
            </div>
            <div class="toast-body" id="toastMessage"></div>
        </div>
    </div>

    <!-- Confirm Start Modal -->
    <div class="modal fade" id="confirmStartModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content custom-modal">
                <div class="modal-header border-0">
                    <h5 class="modal-title">
                        <i class="fas fa-flag-checkered me-2 text-success"></i>Ready to Begin?
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <p class="mb-3">You are about to start the <strong id="startCategoryName"></strong> quiz.</p>
                    <div class="alert alert-warning mb-0">
                        <i class="fas fa-exclamation-triangle me-2"></i>
                        <strong>Important:</strong> You only get <strong>one attempt</strong>. The 45-minute timer
                        starts immediately. Make sure you are ready!
                    </div>
                </div>
                <div class="modal-footer border-0">
                    <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">
                        <i class="fas fa-times me-2"></i>Cancel
                    </button>
                    <button type="button" class="btn btn-success btn-glow" onclick="confirmStartQuiz()">
                        <i class="fas fa-play me-2"></i>Yes, Start Now!
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Confirm Submit Modal -->
    <div class="modal fade" id="confirmSubmitModal" tabindex="-1">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content custom-modal">
                <div class="modal-header border-0">
                    <h5 class="modal-title">
                        <i class="fas fa-paper-plane me-2 text-primary"></i>Submit Quiz?
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <p id="submitWarning" class="mb-3">Are you sure you want to submit your quiz?</p>
                    <div class="alert alert-warning mb-0">
                        <i class="fas fa-exclamation-triangle me-2"></i>
                        <strong>Warning:</strong> You cannot change answers after submission!
                    </div>
                </div>
                <div class="modal-footer border-0">
                    <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">
                        <i class="fas fa-arrow-left me-2"></i>Continue Quiz
                    </button>
                    <button type="button" class="btn btn-success btn-glow" onclick="confirmSubmit()">
                        <i class="fas fa-check me-2"></i>Yes, Submit
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/questions.js"></script>
    <script src="js/app.js"></script>
</body>

</html>